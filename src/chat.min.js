
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};var img,colors="#16a085 #2980b9 #8e44ad #2c3e50 #95a5a6 #d35400 #f39c12 #f1c40f #e67e22 #34495e".split(" "),socket=JSKhanSocket;$(".container-login").hide();$("#user-online-body").hide();
[].contains||Object.defineProperty(Array.prototype,"contains",{enumerable:!1,configurable:!0,writable:!0,value:function(a,b){if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var d=Object(this),f=parseInt(d.length)||0;if(0===f)return!1;var c=parseInt(b)||0;if(c>=f)return!1;0<=c||(c=f+c,0>c&&(c=0));for(;c<f;){var e=d[c];if(a===e||a!==a&&e!==e)return!0;c++}return!1}});
function getCanal(){return 0<window.location.hash.length?"canal "+window.location.hash:"canal global"}function getColor(){return colors[Math.ceil(10*Math.random())]}
function getPerson(){this.Nome=function(){return($("#msgs-body").html().toString().split(" ").contains(sessionStorage.getItem("name"))?sessionStorage.getItem("name"):"User_"+Math.ceil(1E3*Math.random())).replace(/(<([^>]+)>)/ig,"")};this.Img=function(){var a=document.querySelectorAll(".container-login img"),b=[];a.forEach(function(d,f){b.push(a[f].currentSrc)});return(b.contains(sessionStorage.getItem("imagem"))?sessionStorage.getItem("imagem"):"http://image.flaticon.com/icons/svg/163/163801.svg").replace(/(<([^>]+)>)/ig,
"")};this.Color=function(){return colors.contains(sessionStorage.getItem("coloru"))?sessionStorage.getItem("coloru"):"#f2e"}}function hAtual(){var a=new Date,b=10>a.getHours()?"0"+a.getHours():a.getHours(),a=10>a.getHours()?"0"+a.getMinutes():a.getMinutes();return b+":"+a}$("#gerar").on("click",function(){0==$(".gerado").val()&&($(this).html("Canal Gerado"),$(this).css("background","#1abc9c"),$(".gerado").val(document.location.href+"#"+Math.ceil(1E4*Math.random())),$(".gerado").show("slow"))});
0<sessionStorage.length?($("#menu-bar-1").show(),$("#user-online-body").show(),$("body>div.container-login").hide(),$("body>div.container").show()):($(".container-login").show(),$("#menu-bar-1").hide());
$("#som").on("click",function(){"ativado"==$(this).attr("class")?($(this).attr("src","http://image.flaticon.com/icons/svg/149/149301.svg"),$(this).attr("class","desativado")):"desativado"==$(this).attr("class")&&($(this).attr("src","http://image.flaticon.com/icons/svg/149/149302.svg"),$(this).attr("class","ativado"))});
$("#emoji").on("click",function(){"desativado"==$(this).attr("class")?($("#emojis-all").show(),$(this).attr("class","ativado")):"ativado"==$(this).attr("class")&&($("#emojis-all").hide(),$(this).attr("class","desativado"))});$("div#emo").on("click",function(){$(".container>input").val($(".container>input").val()+""+$(this).html())});$("#bugou").on("click",function(){JSKhanSocket.limpar(canal)});
$("body>div.container-login>div>div>img").on("click",function(){"undefined"==typeof img&&(img=$(this).attr("src"),$(this).css("border","3px solid blue"))});$(document).on("keydown",function(a){13===a.keyCode&&$("#bottom").click()});$(".container-login>input").on("change",function(a){var b=document.querySelectorAll("#userm"),d=[];b.forEach(function(a,c){d.push(b[c].innerText)});d.contains($(this).val())&&(alert("Esse nick ja existe!"),$(this).val("User_"+Math.ceil(1E4*Math.random())))});
$("#sair").on("click",function(){sessionStorage.removeItem("name");sessionStorage.removeItem("imagem");sessionStorage.removeItem("coloru");location.reload()});
$("#logar").on("click",function(){if(2<$(".container-login>input").val().length&&"undefined"!=typeof img){nome=$("body>div.container-login>input").val();var a=getColor();sessionStorage.setItem("name",nome);sessionStorage.setItem("imagem",img);sessionStorage.setItem("coloru",a);socket.enviar("usuarios",[sessionStorage.getItem("name"),sessionStorage.getItem("imagem"),a,hAtual()],function(a){console.log(a)});$("body>div.container-login").hide();$("body>div.container").show();$("#menu-bar-1").show();
$("#user-online-body").show()}});
socket.receber("usuarios",function(a){$.each(a.usuarios,function(a,d){var b=$jscomp.makeIterator(d),c=b.next().value,e=b.next().value,g=b.next().value,h=b.next().value;socket.verifica("#msgs-body","O Usuario "+c+" Entrou No Chat!",function(){$("#msgs-body").append('<div id="msgs-body-m" style="background:'+g+' !important;color: white !important;font-weight:bold"><div id="userm"><img src="'+e+'"/><h4>'+c+'</h4></div><div id="mensa-gem"><h3>O Usuario '+c+' Entrou No Chat!</h3><div id="temp">Enviado as '+h+
"</div></div></div>")});socket.verifica("#ons-us",c,function(){$("#ons-us").append('<div id="ons-u"><img src="'+e+'"/><h4>'+c+"</h4></div>");5<document.querySelectorAll("#ons-u").length&&$("#ons").css("overflow-y","scroll")})})});$("#ons-btn").click(function(){$("#user-online-body").toggle("slow")});
socket.receber(getCanal(),function(a){150<document.querySelectorAll("#msgs-body-m").length&&setTimeout(function(){JSKhanSocket.limpar(getCanal())},5E3);a=a[getCanal()];$.each(a,function(a,d){var b=$jscomp.makeIterator(d),c=b.next().value,e=b.next().value,g=b.next().value,h=b.next().value,k=b.next().value;socket.verifica("#msgs-body",e,function(){$("#msgs-body").append('<div id="msgs-body-m" style="background:'+k+' !important"><div id="userm"><img src="'+g+'"/><h4>'+c+'</h4></div><div id="mensa-gem">'+
e+'<div id="temp">Enviado as '+h+"</div></div></div>");0<sessionStorage.length&&"ativado"==$("#som").attr("class")&&document.getElementsByTagName("audio")[0].play();$("#msgs-body").animate({scrollTop:$("#msgs-body")[0].scrollHeight},500)})})});
$("#bottom").on("click",function(){if(3<$(".container>input").val().length)if($("#msgs-body").html().toString().split(" ").contains($(".container>input").val()))$(".container>input").val(""),console.log("Anti Flood"),$(".container>input").attr("placeholder","Opaa , Sem Flood !");else{var a=$(".container>input").val(),b=new getPerson,a=a.replace(/(<([^>]+)>)/ig,""),a=a.replace(/[\\"'><]/g,"");socket.enviar(getCanal(),[b.Nome(),a,b.Img(),hAtual,b.Color()],function(a){console.log("sucesso"==a?"Enviado Ao Socket Com Sucesso":
"Erro ao Enviar Ao Socket");$(".container>input").val("")})}});
